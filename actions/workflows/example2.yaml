version: 1.0

description: A basic sequential workflow.

tasks:

  statsd_counter_start:
    action: test.statsd_counter
    input:
      name: stackstorm.workflow.example2.initiated
    next:
      - do: sleep

  kv_store_start:
    action: st2.kv.set_object
    input:
      key: "{{ ctx().workflow_execution_id }}"
      value:
        start: "{{ ctx().slack_thread_ts }}"
      ttl: 300

  sleep:
    action: test.sleep
    next:
      - do: statsd_counter_passed

  statsd_counter_passed:
    action: test.statsd_counter
    input:
      name: stackstorm.workflow.example2.passed
